function html(e,...t){let r=templates.get(e);return void 0===r&&(r=new Template(e),templates.set(e,r)),new TemplateResult(r,t)}function render(e,t){let r=t.__templateInstance;if(void 0!==r&&r.template===e.template&&r instanceof TemplateInstance)return void r.update(e.values);r=new TemplateInstance(e.template),t.__templateInstance=r;const s=r._clone();for(r.update(e.values);t.firstChild;)t.removeChild(t.firstChild);t.appendChild(s)}var fireEvent=(e=String,t=null,r=document)=>{r.dispatchEvent(new CustomEvent(e,{detail:t}))},toJsProp=e=>{let t=e.split("-");if(t.length>1){var r=t[1].charAt(0).toUpperCase();e=t[0]+r+t[1].slice(1).toLowerCase()}return e};const loadScript=e=>new Promise((t,r)=>{let s=document.createElement("script");s.src=e,s.onload=(e=>{t(e)}),s.onerror=(e=>{r(e)}),document.body.appendChild(s)});var Pubsub=class{constructor(){this.handlers=[]}subscribe(e,t,r){void 0===r&&(r=t),this.handlers.push({event:e,handler:t.bind(r)})}publish(e,t){for(let r=0;r<this.handlers.length;r++)this.handlers[r].event===e&&this.handlers[r].oldValue!==t.value&&(this.handlers[r].handler(t,this.handlers[r].oldValue),this.handlers[r].oldValue=t.value)}},PubSubLoader=e=>{e?window.PubSub=window.PubSub||new Pubsub:global.PubSub=global.PubSub||new Pubsub};const templates=new Map;class TemplateResult{constructor(e,t){this.template=e,this.values=t}}const exprMarker="{{}}";class TemplatePart{constructor(e,t,r,s,n){this.type=e,this.index=t,this.name=r,this.rawName=s,this.strings=n}}class Template{constructor(e){this.parts=[],this._strings=e,this._parse()}_parse(){this.element=document.createElement("template"),this.element.innerHTML=this._getTemplateHtml(this._strings);const e=document.createTreeWalker(this.element.content,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);let t=-1,r=0;const s=[],n=[];for(;e.nextNode();){t++;const o=e.currentNode;if(o.nodeType===Node.ELEMENT_NODE){const e=o.attributes;for(let s=0;s<e.length;s++){const o=e.item(s),i=o.value.split(exprMarker);if(i.length>1){const e=this._strings[r],s=e.substring(0,e.length-i[0].length).match(/((?:\w|[.\-_$])+)=["']?$/)[1];this.parts.push(new TemplatePart("attribute",t,o.name,s,i)),n.push(o),r+=i.length-1}}}else if(o.nodeType===Node.TEXT_NODE){const e=o.nodeValue.split(exprMarker);if(e.length>1){r+=e.length-1;for(let r=0;r<e.length;r++){const s=e[r],n=new Text(s);o.parentNode.insertBefore(n,o),t++,r<e.length-1&&(o.parentNode.insertBefore(new Text,o),o.parentNode.insertBefore(new Text,o),this.parts.push(new TemplatePart("node",t)),t+=2)}t--,s.push(o)}else o.nodeValue.trim()||(s.push(o),t--)}}for(const e of s)e.parentNode.removeChild(e);for(const e of n)e.ownerElement.removeAttribute(e.name)}_getTemplateHtml(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r]),r<e.length-1&&t.push(exprMarker);return t.join("")}}class Part{constructor(e){this.instance=e}_getValue(e){if("function"==typeof e)try{e=e(this)}catch(e){return void console.error(e)}if(null!==e)return e}}class AttributePart extends Part{constructor(e,t,r,s){super(e),console.assert(t.nodeType===Node.ELEMENT_NODE),this.element=t,this.name=r,this.strings=s}setValue(e){const t=this.strings;let r="";for(let s=0;s<t.length;s++)if(r+=t[s],s<t.length-1){const t=this._getValue(e[s]);if(t&&"string"!=typeof t&&t[Symbol.iterator])for(const e of t)r+=e;else r+=t}this.element.setAttribute(this.name,r)}get size(){return this.strings.length-1}}class NodePart extends Part{constructor(e,t,r){super(e),this.startNode=t,this.endNode=r}setValue(e){(e=this._getValue(e))instanceof Node?this._previousValue=this._setNodeValue(e):e instanceof TemplateResult?this._previousValue=this._setTemplateResultValue(e):e&&void 0!==e.then?(e.then(t=>{this._previousValue===e&&this.setValue(t)}),this._previousValue=e):e&&"string"!=typeof e&&e[Symbol.iterator]?this._previousValue=this._setIterableValue(e):this.startNode.nextSibling===this.endNode.previousSibling&&this.startNode.nextSibling.nodeType===Node.TEXT_NODE?(this.startNode.nextSibling.textContent=e,this._previousValue=e):this._previousValue=this._setTextValue(e)}_insertNodeBeforeEndNode(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_setNodeValue(e){return this.clear(),this._insertNodeBeforeEndNode(e),e}_setTextValue(e){return this._setNodeValue(new Text(e))}_setTemplateResultValue(e){let t;return this._previousValue&&this._previousValue._template===e.template?t=this._previousValue:(t=this.instance._createInstance(e.template),this._setNodeValue(t._clone())),t.update(e.values),t}_setIterableValue(e){let t,r=this.startNode;const s=e[Symbol.iterator](),n=Array.isArray(this._previousValue)?this._previousValue:void 0;let o=0;const i=[];let l=s.next(),a=s.next();for(l.done&&this.clear();!l.done;){let e;void 0!==n&&o<n.length?(e=n[o++],a.done&&e.endNode!==this.endNode&&(this.clear(e.endNode.previousSibling),e.endNode=this.endNode),t=e.endNode):(a.done?t=this.endNode:(t=new Text,this._insertNodeBeforeEndNode(t)),e=new NodePart(this.instance,r,t)),e.setValue(l.value),i.push(e),l=a,a=s.next(),r=t}return i}clear(e=this.startNode){this._previousValue=void 0;let t=e.nextSibling;for(;null!==t&&t!==this.endNode;){let e=t.nextSibling;t.parentNode.removeChild(t),t=e}}}class TemplateInstance{constructor(e){this._parts=[],this._template=e}get template(){return this._template}update(e){let t=0;for(const r of this._parts)void 0===r.size?r.setValue(e[t++]):(r.setValue(e.slice(t,t+r.size)),t+=r.size)}_clone(){const e=document.importNode(this._template.element.content,!0);if(this._template.parts.length>0){const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),r=this._template.parts;let s=0,n=0,o=r[0],i=t.nextNode();for(;null!=i&&n<r.length;)s===o.index?(this._parts.push(this._createPart(o,i)),o=r[++n]):(s++,i=t.nextNode())}return e}_createPart(e,t){if("attribute"===e.type)return new AttributePart(this,t,e.name,e.strings);if("node"===e.type)return new NodePart(this,t,t.nextSibling);throw new Error(`unknown part type: ${e.type}`)}_createInstance(e){return new TemplateInstance(e)}}window.registeredElements=window.registeredElements||[];const handleProperties=(e,t)=>{if(t)for(let r of Object.entries(t))handleProperty(e,r[0],r[1]),e[r[0]]=e.hasAttribute(r[0])?e.getAttribute(r[0]):r[1].value},handleProperty=(e,t,{observer:r,strict:s,global:n,reflect:o,render:i,value:l})=>{Boolean(r||n)&&_needsObserverSetup(e,t)?(e.observedProperties.push(t),n&&e[r]&&PubSub.subscribe(`global.${t}`,e[r].bind(e)),setupObserver(e,t,r,{strict:s,global:n,reflect:o,renderer:i})):!Boolean(r||n)&&Boolean(o||i)&&setupObserver(e,t,r,{strict:s,global:n,reflect:o,renderer:i})},_needsObserverSetup=(e,t)=>(e.observedProperties||(e.observedProperties=[]),!e.observedProperties[t]||(console.warn("observer::ignoring duplicate property observer "+t),!1)),forObservers=(e,t,r=!1)=>{for(let s of t){let t=s.split(/\(|\)/g),n=t[0];t=t.slice(1);for(let s of t)s.length&&handleProperty(e,s,n,{strict:!1,global:r})}},setupObserver=(e,t,r,{strict:s,global:n,reflect:o,renderer:i})=>{Object.defineProperty(e,t,{set(e){if(void 0===e)return;if(this[`_${t}`]===e)return;this[`_${t}`]=e;let s={property:t,value:e};o&&(e?this.setAttribute(t,String(e)):this.removeAttribute(t)),i&&("boolean"==typeof i?render(this.render(),this.shadowRoot):render(this[i](),this.shadowRoot)),n?(s.instance=this,PubSub.publish(`global.${t}`,s)):r&&(this[r]?this[r](s):console.warn(`observer undefined::${r} is not a function`))},get(){return this[`_${t}`]},configurable:!s})},handleObservers=(e,t=[],r=[])=>{(t||r)&&forObservers(e,t)},handleListeners=e=>{const t=e.attributes;for(const r of t)if(String(r.name).includes("on-")){const t=r.value,s=r.name.replace("on-","");e.addEventListener(String(s),r=>{for(e=r.path[0];!e.host;)e=e.parentNode;e.host[t]&&e.host[t](r)})}},ready=e=>{requestAnimationFrame(()=>{e.ready&&e.ready()})},constructorCallback=(e=HTMLElement,t=Function,r=!1)=>{PubSubLoader(r),e.fireEvent=e.fireEvent||fireEvent.bind(e),e.toJsProp=e.toJsProp||toJsProp.bind(e),e.loadScript=e.loadScript||loadScript.bind(e),handleProperties(e,t.properties),handleObservers(e,t.observers,t.globalObservers),!e.registered&&e.created&&e.created(),e.registered=!0},connectedCallback=(e=HTMLElement,t=Function)=>{e.connected&&e.connected(),handleListeners(e),ready(e)},shouldRegister=(e,t)=>-1===window.registeredElements.indexOf(e)&&(window.registeredElements.push(e),!0);var base={ready,connectedCallback(e=HTMLElement,t=Function){e.connected&&e.connected(),handleListeners(e),ready(e)},constructorCallback(e=HTMLElement,t=Function,r=!1){PubSubLoader(r),e.fireEvent=e.fireEvent||fireEvent.bind(e),e.toJsProp=e.toJsProp||toJsProp.bind(e),e.loadScript=e.loadScript||loadScript.bind(e),handleProperties(e,t.properties),handleObservers(e,t.observers,t.globalObservers),!e.registered&&e.created&&e.created(),e.registered=!0},shouldRegister:(e,t)=>-1===window.registeredElements.indexOf(e)&&(window.registeredElements.push(e),!0)};let sheduled=!1;const afterRenderQue=[],beforeRenderQue=[],callMethod=e=>{const t=e[0],r=e[1],s=e[2];try{r.apply(t,s)}catch(e){setTimeout(()=>{throw e})}},flushQue=e=>{for(;e.length;)callMethod(e.shift)},runQue=e=>{for(let t=0,r=e.length;t<r;t++)callMethod(e.shift());sheduled=!1},shedule=()=>{sheduled=!0,requestAnimationFrame(()=>{flushQue(beforeRenderQue),setTimeout(()=>{runQue(afterRenderQue)})})};var renderStatus={afterRender(e,t,r){sheduled||shedule(),afterRenderQue.push([e,t,r])},beforeRender(e,t,r){sheduled||shedule(),beforeRenderQue.push([e,t,r])}};const ____isWindow____=()=>{try{return window}catch(e){return!1}},____hasWindow____=(()=>{try{return window}catch(e){return!1}})();____hasWindow____?(window.RenderStatus=window.RenderStatus||renderStatus,window.html=window.html||html):(exports.RenderStatus=exports.RenderStatus||renderStatus,exports.html=exports.html||html);var backed=e=>{let t,r=e.is||(e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace("-",""))(e.name),s=!1;if(____hasWindow____){const n=[];for(const t of Object.entries(e.properties)){const{reflect:e,render:r}=t[1];e&&n.push(t[0]),r&&(s=!0)}return t=class extends e{static get observedAttributes(){return n}constructor(){super(),s&&!this.shadowRoot&&this.attachShadow({mode:"open"}),base.constructorCallback(this,e,____hasWindow____)}connectedCallback(){base.connectedCallback(this,e)}disconnectedCallback(){this.disconnected&&this.disconnected()}attributeChangedCallback(e,t,r){this[e]=r}},base.shouldRegister(r,t)&&customElements.define(r,t),window[e.name]=t}};window.dispatchEvent(new CustomEvent("backed-ready"));export default backed;