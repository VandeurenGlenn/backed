{"version":3,"file":"backed-node.js","sources":["../src/base.js","../src/internals/fire-event.js","../src/internals/to-js-prop.js","../src/internals/load-script.js","../src/internals/pub-sub.js","../src/internals/pub-sub-loader.js","../src/backed.js"],"sourcesContent":["'use strict';\n\nconst setupTemplate = ({ name = null, shady = false }) => {\n  try {\n    const ownerDocument = document.currentScript.ownerDocument;\n    const template = ownerDocument.querySelector(`template[id=\"${name}\"]`);\n    if (template) {\n      if (shady) {\n        ShadyCSS.prepareTemplate(template, name);\n      }\n      return template;\n    }\n  } catch (e) {\n    return console.warn(e);\n  }\n}\n\nconst handleShadowRoot = ({ target = HTMLElement, template = null }) => {\n  if (!target.shadowRoot) {\n    target.attachShadow({mode: 'open'});\n    if (template) {\n      target.shadowRoot.appendChild(\n        document.importNode(template.content, true));\n    }\n  }\n}\n\nconst handleProperties = (target, properties) => {\r\n  if (properties) {\r\n    for (let property of Object.keys(properties)) {\r\n      const observer = properties[property].observer;\r\n      const strict = properties[property].strict;\r\n      const isGlobal = properties[property].global;\r\n      handlePropertyObserver(target, property, observer, {\r\n        strict: strict || false,\r\n        global: isGlobal || false\r\n      });\n      target[property] = properties[property].value;\n      // Bind(superclass, superclass.properties)\r\n    }\r\n  }\r\n}\r\n\r\nconst handlePropertyObserver = (obj, property, observer, opts={\r\n  strict: false, global:false\r\n}) => {\r\n\r\n  if (observer && _needsObserverSetup(obj, property)) {\r\n    obj.observedProperties.push(property);\r\n\n    // subscribe only when a callback is defined, all other global options are still available ...\n    if (opts.global && obj[observer]) {\n      PubSub.subscribe(`global.${property}`, obj[observer].bind(obj));\n    }\r\n    setupObserver(obj, property, observer, opts)\r\n  }\r\n}\r\n\r\nconst _needsObserverSetup = (obj, property) => {\r\n  if (!obj.observedProperties) {\r\n    obj.observedProperties = [];\r\n  }\r\n  if (obj.observedProperties[property]) {\r\n    console.warn(\r\n      'observer::ignoring duplicate property observer ' + property\r\n    );\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\n\r\nconst forObservers = (target, observers, isGlobal=false) => {\r\n  for (let observe of observers) {\r\n    let parts = observe.split(/\\(|\\)/g);\r\n    let fn = parts[0];\r\n    parts = parts.slice(1);\r\n    for (let property of parts) {\r\n      if (property.length) {\r\n        handlePropertyObserver(target, property, fn, {\r\n          strict: false,\r\n          global: isGlobal\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Runs a method on target whenever given property changes\r\n *\r\n * example:\r\n * change(change) {\r\n *  change.property // name of the property\r\n *  change.value // value of the property\r\n * }\r\n *\r\n * @arg {object} obj target\r\n * @arg {string} property name\r\n * @arg {boolean} strict\r\n * @arg {method} fn The method to run on change\r\n */\r\nconst setupObserver = (obj, property, fn, opts={\r\n  strict: false, global: false\r\n}) => {\n  const isConfigurable = opts.strict ? false : true;\n  Object.defineProperty(obj, property, {\r\n    set(value) {\n      if (this[`_${property}`] === value) {\n        return;\n      }\n      this[`_${property}`] = value;\r\n      let data = {\r\n        property: property,\r\n        value: value\r\n      };\r\n      if (opts.global) {\r\n        data.instance = this;\r\n        PubSub.publish(`global.${property}`, data);\r\n      } else {\r\n        this[fn](data);\r\n      }\r\n    },\r\n    get() {\r\n      return this[`_${property}`];\r\n    },\r\n    configurable: isConfigurable\n  });\r\n}\r\n\r\n\r\nconst handleObservers = (target, observers=[], globalObservers=[]) => {\r\n  if (!observers && !globalObservers) {\r\n    return;\r\n  }\r\n  forObservers(target, observers);\r\n}\n\nconst ready = target => {\n  requestAnimationFrame(() => {\n    if (target.ready) target.ready();\n  });\n}\n\r\nexport default {\n  setupTemplate: setupTemplate.bind(this),\n  handleShadowRoot: handleShadowRoot.bind(this),\n  handleProperties: handleProperties.bind(this),\r\n  handlePropertyObserver: handlePropertyObserver.bind(this),\r\n  handleObservers: handleObservers.bind(this),\r\n  setupObserver: setupObserver.bind(this),\n  ready: ready.bind(this)\n}\r\n","'use strict';\r\n/**\r\n * @mixin backed\r\n * @param {string} type Name of the event\r\n * @param {HTMLElement} target Name of the event\r\n * @param {string|boolean|number|object|array} detail\r\n */\r\nexport default (type=String, detail=null, target=document) => {\r\n  target.dispatchEvent(new CustomEvent(type, {detail: detail}));\r\n};\r\n","'use strict';\r\n/**\r\n * @mixin Backed\r\n *\r\n * some-prop -> someProp\r\n *\r\n * @arg {string} string The content to convert\r\n * @return {string} string\r\n */\r\nexport default string => {\r\n  let parts = string.split('-');\r\n  if (parts.length > 1) {\r\n    var upper = parts[1].charAt(0).toUpperCase();\r\n    string = parts[0] + upper + parts[1].slice(1).toLowerCase();\r\n  }\r\n  return string;\r\n};\r\n","'use strict';\nconst loadScript = src => {\n  return new Promise((resolve, reject) => {\n    let script = document.createElement('script');\n    script.src = src;\n    script.onload = result => {\n      resolve(result);\n    }\n    script.onerror = error => {\n      reject(error);\n    }\n    document.body.appendChild(script);\n  });\n}\nexport default loadScript;\n","'use strict';\r\nexport default class {\r\n\r\n  /**\r\n   * Creates handlers\r\n   */\r\n  constructor() {\r\n    this.handlers = [];\r\n  }\r\n\r\n  /**\r\n   * @param {String} event\r\n   * @param {Method} handler\r\n   * @param {HTMLElement} context\r\n   */\r\n  subscribe(event, handler, context) {\r\n    if (typeof context === 'undefined') {\r\n      context = handler;\r\n    }\r\n    this.handlers.push({event: event, handler: handler.bind(context)});\r\n  }\r\n\r\n  /**\r\n   * @param {String} event\r\n   * @param {String|Number|Boolean|Object|Array} change\n   */\r\n  publish(event, change) {\n    for (let i = 0; i < this.handlers.length; i++) {\r\n      if (this.handlers[i].event === event) {\n        let oldValue = this.handlers[i].oldValue;\n        // dirty checking value, ensures that we don't create a loop\n        if (oldValue !== change.value) {\n          this.handlers[i].handler(change, this.handlers[i].oldValue);\n          this.handlers[i].oldValue = change.value;\n        }\n      }\r\n    }\r\n  }\r\n}\r\n","'use strict';\r\nimport Pubsub from './pub-sub.js';\nexport default isWindow => {\n  if (isWindow) {\n    window.PubSub = window.PubSub || new Pubsub();\n  } else {\n    global.PubSub = global.PubSub || new Pubsub();\n  }\n}\r\n","'use strict';\r\nimport base from './base.js';\r\nimport fireEvent from './internals/fire-event.js';\r\nimport toJsProp from './internals/to-js-prop.js';\r\nimport loadScript from './internals/load-script.js';\r\nimport PubSubLoader from './internals/pub-sub-loader.js';\r\nconst supportsCustomElementsV1 = 'customElements' in window;\r\nconst supportsCustomElementsV0 = 'registerElement' in document;\nconst supportsShadowDOMV1 = !!HTMLElement.prototype.attachShadow;\n\r\nconst isWindow = () => {\r\n  try {\r\n    return window;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n * @module backed\r\n * @param {class} _class\r\n */\r\nexport default _class => {\r\n  const upperToHyphen = string => {\r\n    return string.replace(/([A-Z])/g, \"-$1\").toLowerCase().replace('-', '');\r\n  };\r\n\r\n  let klass;\r\n\r\n  // get the tagName or try to make one with class.name\r\n  let name = _class.is || upperToHyphen(_class.name);\r\n\r\n  // Setup properties & observers\r\n  if (isWindow()) {\n    const template = base.setupTemplate({\n      name: name,\n      shady: !supportsShadowDOMV1\n    });\n\n    if (supportsCustomElementsV1) {\n      klass = class extends _class {\r\n        constructor() {\n          super();\n          if (!supportsShadowDOMV1) {\n            ShadyCSS.styleElement(this)\n          }\n          if (!this.registered && this.created) this.created();\n          this._created();\n        }\n        connectedCallback() {\n          base.handleShadowRoot({target: this, template: template});\n          if (this.connected) this.connected();\n        }\n        disconnectedCallback() {\n          if (this.disconnected) this.disconnected();\n        }\n        _created() {\n          PubSubLoader(isWindow());\r\n          this.fireEvent = fireEvent.bind(this);\r\n          this.toJsProp = toJsProp.bind(this);\r\n          this.loadScript = loadScript.bind(this);\r\n\r\n          base.handleProperties(this, _class.properties);\r\n          base.handleObservers(this, _class.observers, _class.globalObservers);\r\n\n          // notify everything is ready\n          base.ready(this);\n\n          // let backed know the element is registered\n          this.registered = true;\n        }\r\n      }\r\n      customElements.define(name, klass);\n    } else if (supportsCustomElementsV0) {\r\n      klass = document.registerElement(name, class extends _class {\r\n        createdCallback() {\n          if (!supportsShadowDOMV1) {\n            ShadyCSS.styleElement(this)\n          }\n          if (!this.registered && this.created) this.created();\n          this._created();\n        }\n        attachedCallback() {\n          base.handleShadowRoot({target: this, template: template});\n          if (this.connected) this.connected();\n        }\n        detachedCallback() {\n          if (this.disconnected) this.disconnected();\n        }\n        _created() {\n          PubSubLoader(isWindow());\r\n          this.fireEvent = fireEvent.bind(this);\r\n          this.toJsProp = toJsProp.bind(this);\r\n          this.loadScript = loadScript.bind(this);\r\n\r\n          base.handleProperties(this, _class.properties);\r\n          base.handleObservers(this, _class.observers, _class.globalObservers);\n\n          // notify everything is ready\n          base.ready(this);\n          // let backed know the element is registered\n          this.registered = true;\n        }\r\n        attachShadow() {\r\n          // TODO: feature detect shadowDOM for V1\r\n          return this.createShadowRoot();\r\n        }\r\n      })\r\n    } else {\r\n      console.warn('classes::unsupported');\r\n    }\r\n  } else {\n    // TODO: handle Commonjs (properties, observers, etc ...)\n    klass = _class;\r\n  }\n  return klass;\r\n};\r\n"],"names":["setupTemplate","name","shady","ownerDocument","document","currentScript","template","querySelector","prepareTemplate","e","console","warn","handleShadowRoot","target","HTMLElement","shadowRoot","attachShadow","mode","appendChild","importNode","content","handleProperties","properties","Object","keys","property","observer","strict","isGlobal","global","value","handlePropertyObserver","obj","opts","_needsObserverSetup","observedProperties","push","subscribe","bind","forObservers","observers","observe","parts","split","fn","slice","length","setupObserver","isConfigurable","defineProperty","data","instance","publish","handleObservers","globalObservers","ready","this","type","String","detail","dispatchEvent","CustomEvent","string","upper","charAt","toUpperCase","toLowerCase","loadScript","Promise","resolve","reject","script","createElement","src","onload","result","onerror","error","body","handlers","event","handler","context","change","i","oldValue","isWindow","PubSub","window","Pubsub","supportsCustomElementsV1","supportsCustomElementsV0","supportsShadowDOMV1","prototype","upperToHyphen","replace","klass","_class","is","base","styleElement","registered","created","_created","connected","disconnected","fireEvent","toJsProp","define","registerElement","createShadowRoot"],"mappings":"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"}